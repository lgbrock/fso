(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{40:function(e,n,t){},41:function(e,n,t){"use strict";t.r(n);var c=t(1),r=t(16),a=t.n(r),o=t(3),u=t(0),i=function(e){return Object(u.jsxs)("div",{children:["filter shown with:"," ",Object(u.jsx)("input",{value:e.filter,onChange:function(n){return e.handleFilterChange(n)}})]})},s=function(e){return Object(u.jsxs)("form",{onSubmit:e.addName,children:[Object(u.jsxs)("div",{children:["name:"," ",Object(u.jsx)("input",{value:e.newName,onChange:function(n){return e.setNewName(n.target.value)}})]}),Object(u.jsxs)("div",{children:["number:"," ",Object(u.jsx)("input",{value:e.newNumber,onChange:function(n){return e.setNewNumber(n.target.value)}})]}),Object(u.jsx)("div",{children:Object(u.jsx)("button",{type:"submit",children:"add"})})]})},d=function(e){var n=e.persons,t=e.toggleDelete,c=n.map((function(e){return Object(u.jsxs)("p",{className:"persons",children:[e.name," ",e.number,Object(u.jsx)("button",{className:"btn",onClick:function(){return t(e.id)},children:"delete"})]},e.name)}));return Object(u.jsx)("p",{children:c})},l=function(e){var n=e.successMessage,t=e.errorMessage;return Object(u.jsxs)("div",{className:"notifications",children:[n&&Object(u.jsx)("div",{className:"success",children:n}),t&&Object(u.jsx)("div",{className:"error",children:t})]})},f=t(4),j=t.n(f),b="/api/persons",h=function(){return j.a.get(b).then((function(e){return e.data}))},m=function(e){return j.a.post(b,e).then((function(e){return e.data}))},O=function(e,n){return j.a.put("".concat(b,"/").concat(e),n).then((function(e){return e.data}))},p=function(e){return j.a.delete("".concat(b,"/").concat(e)).then((function(e){return e.data}))},v=function(){var e=Object(c.useState)([]),n=Object(o.a)(e,2),t=n[0],r=n[1],a=Object(c.useState)(""),f=Object(o.a)(a,2),j=f[0],b=f[1],v=Object(c.useState)(""),x=Object(o.a)(v,2),w=x[0],N=x[1],g=Object(c.useState)(""),C=Object(o.a)(g,2),k=C[0],S=C[1],T=Object(c.useState)(null),y=Object(o.a)(T,2),D=y[0],L=y[1],M=Object(c.useState)(null),A=Object(o.a)(M,2),E=A[0],F=A[1];Object(c.useEffect)((function(){h().then((function(e){return r(e)})).catch((function(e){return alert(e)}))}),[]);return Object(u.jsxs)("div",{children:[Object(u.jsx)("h2",{children:"Phonebook"}),Object(u.jsx)(l,{successMessage:D,errorMessage:E}),Object(u.jsx)(i,{filter:k,handleFilterChange:function(e){S(e.target.value);var n=t.filter((function(n){return n.name.toLowerCase().includes(e.target.value.toLowerCase())}));r(n)}}),Object(u.jsx)("h3",{children:"Add a new"}),Object(u.jsx)(s,{newName:j,newNumber:w,addName:function(e){e.preventDefault();var n={name:j,number:w},c=t.find((function(e){return e.name.toLowerCase()===j.toLowerCase()}));c?window.confirm("".concat(n.name," is already added to phonebook, replace the old number with a new one?"))&&O(c.id,n).then((function(e){r(t.map((function(n){return n.id!==e.id?n:e}))),L("Updated ".concat(j)),setTimeout((function(){L(null)}),5e3),b(""),N("")})).catch((function(e){e.response.data?(F(e.response.data.error),setTimeout((function(){F(null)}),5e3)):(F("Information of ".concat(n.name," has already been removed from server")),r(t.filter((function(e){return e.id!==c.id}))),b(""),N(""),setTimeout((function(){F(null)}),5e3))})):m(n).then((function(e){r(t.concat(e)),L("Added ".concat(j)),setTimeout((function(){L(null)}),3e3),b(""),N("")})).catch((function(e){F(e.response.data.error),setTimeout((function(){F(null)}),5e3)}))},setNewName:b,setNewNumber:N}),Object(u.jsx)("h3",{children:"Numbers"}),Object(u.jsx)(d,{persons:t,toggleDelete:function(e){var n=t.find((function(n){return n.id===e}));window.confirm("Delete ".concat(n.name,"?"))&&p(e).then((function(){r(t.filter((function(n){return n.id!==e})))}))},filter:k})]})};t(40);a.a.render(Object(u.jsx)(v,{}),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.a3777af3.chunk.js.map